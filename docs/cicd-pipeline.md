# CI/CD 流水线

## 什么是 CI/CD

- CI（持续集成）：代码提交后自动构建、测试
- CD（持续交付/部署）：测试通过后自动部署到生产环境

比喻：CI 是工厂的质检流水线，CD 是自动发货系统。

## 为什么需要 CI/CD

没有 CI/CD：
1. 手动运行测试（经常忘记）
2. 手动构建（容易出错）
3. 手动部署（紧张刺激）

有了 CI/CD：代码一推送，自动测试 → 自动构建 → 自动部署。

## 典型流水线

```
代码推送
  → 代码检查（ESLint、类型检查）
  → 单元测试
  → 构建
  → 集成测试
  → 构建 Docker 镜像
  → 推送到镜像仓库
  → 部署到测试环境
  → 部署到生产环境（手动确认或自动）
```

## 常用 CI/CD 工具

| 工具 | 特点 |
|------|------|
| GitHub Actions | GitHub 原生，免费额度充足 |
| GitLab CI | GitLab 内置，功能全面 |
| Jenkins | 老牌，插件丰富，需要自己维护 |
| CircleCI | 云服务，配置简单 |

## 部署策略

| 策略 | 说明 |
|------|------|
| 滚动更新 | 逐步替换旧版本（K8s 默认） |
| 蓝绿部署 | 两套环境切换，回滚快 |
| 金丝雀发布 | 先给一小部分用户用新版本 |
| A/B 测试 | 不同用户看到不同版本 |

> CI/CD 的目标是让部署变得无聊——因为它太可靠了，不值得紧张。

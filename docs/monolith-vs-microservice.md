# 单体 vs 微服务

## 单体架构

所有功能打包在一个应用里。一个代码仓库，一个部署单元。

比喻：一栋大楼里的所有部门——人事、财务、技术都在同一栋楼里。

优点：
- 开发简单，不需要处理服务间通信
- 部署简单，一个包搞定
- 调试方便，所有代码在一起

缺点：
- 代码量大了之后难以维护
- 一个模块的 bug 可能拖垮整个系统
- 无法针对单个模块独立扩展
- 技术栈被锁定

## 微服务架构

把应用拆分成多个小服务，每个服务独立开发、部署、扩展。

比喻：一个产业园里的多家公司——各自独立运营，通过合同（API）协作。

优点：
- 每个服务可以独立开发和部署
- 可以针对热点服务单独扩展
- 技术栈可以不同（用户服务用 Java，推荐服务用 Python）
- 故障隔离

缺点：
- 运维复杂度大幅增加
- 服务间通信带来延迟和可靠性问题
- 分布式事务很难处理
- 需要完善的监控和链路追踪

## 什么时候该拆微服务

不要一开始就用微服务。

```
小团队（< 5人）+ 新项目 → 单体
团队增长 + 模块边界清晰 → 考虑拆分
明确的性能瓶颈在某个模块 → 拆出来
```

## 拆分原则

- 按业务领域拆分（用户、订单、支付、库存）
- 每个服务有自己的数据库
- 服务之间通过 API 或消息队列通信
- 避免循环依赖

> 微服务不是银弹。过早拆分比不拆分更危险。先做好单体，再按需拆分。

# 缓存策略

## 什么是缓存

缓存就是把"经常用到的数据"放在一个更快的地方，避免每次都去慢的地方取。

生活中的例子：你把常用的工具放在桌面上，而不是每次都去储物间找。

## 常见的缓存策略

### Cache Aside（旁路缓存）

最常用的策略：

1. 读数据时，先查缓存
2. 缓存命中，直接返回
3. 缓存未命中，查数据库，然后写入缓存

### Write Through（写穿透）

写数据时，同时写缓存和数据库。保证数据一致性，但写入速度稍慢。

### Write Behind（写回）

写数据时只写缓存，异步批量写入数据库。速度快，但有数据丢失风险。

## 缓存常见问题

### 缓存穿透

请求的数据在缓存和数据库中都不存在，每次请求都打到数据库。

解决方案：缓存空值，或使用布隆过滤器。

### 缓存雪崩

大量缓存同时过期，请求全部涌向数据库。

解决方案：给过期时间加随机值，避免同时失效。

### 缓存击穿

热点数据过期的瞬间，大量请求同时查询数据库。

解决方案：使用互斥锁，只让一个请求去查数据库。

## 小结

选择缓存策略没有银弹，关键是理解你的业务场景：读多写少用 Cache Aside，写入性能要求高用 Write Behind。

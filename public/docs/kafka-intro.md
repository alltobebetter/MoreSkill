# Kafka 入门

## 什么是 Kafka

Kafka 是一个分布式事件流平台。它不只是消息队列，更像是一个"事件日志系统"。

和 RabbitMQ 的区别：RabbitMQ 是"邮局"（消息投递后就没了），Kafka 是"报纸档案馆"（消息持久化保存，可以反复读取）。

## 核心概念

| 概念 | 说明 |
|------|------|
| Topic | 消息的分类，类似数据库的表 |
| Partition | Topic 的分区，实现并行处理 |
| Producer | 生产者，发送消息到 Topic |
| Consumer | 消费者，从 Topic 读取消息 |
| Consumer Group | 消费者组，组内消费者分摊消息 |
| Offset | 消费位移，记录读到哪了 |
| Broker | Kafka 服务节点 |

## 为什么 Kafka 这么快

- 顺序写磁盘（比随机写快几个数量级）
- 零拷贝技术（数据直接从磁盘到网卡）
- 批量发送和压缩
- 分区并行处理

## 适用场景

- 日志收集和分析
- 事件溯源（Event Sourcing）
- 实时数据管道（数据库 → Kafka → 数据仓库）
- 大数据处理的数据入口
- 微服务之间的事件通信

## Kafka vs RabbitMQ

| | Kafka | RabbitMQ |
|---|-------|----------|
| 吞吐量 | 极高（百万/秒） | 中等（万/秒） |
| 消息保留 | 持久化，可重复消费 | 消费后删除 |
| 路由 | 简单（Topic） | 灵活（Exchange） |
| 顺序性 | 分区内有序 | 队列内有序 |
| 复杂度 | 高 | 中 |

> Kafka 适合"大数据量 + 需要持久化 + 需要重放"的场景。简单的任务队列用 RabbitMQ 更合适。
